<a class="card" [class.header-project-details]="isHeader">
  <div class="card-content">
    <div class="organization-identifier">
      <div class="project">
        <div class="project-id">
          @if (isHeader) {
            <span class="project-id">PROJECT CODE:&nbsp;</span>
          }
          <label class="project-id" for="username">{{ project.agreement_id }}</label>
        </div>
        <label class="project-name" for="username"
          >{{ project.projectDescription && project.projectDescription + ' - ' }} {{ project.description }}</label
        >
      </div>
    </div>
    <div class="project-info -mt-1">
      <div class="principal-investigator">
        <app-custom-tag [statusId]="getStatusDisplay().statusId" [statusName]="getStatusDisplay().statusName" [tiny]="true"> </app-custom-tag>
      </div>
      @if (hasField('project_lead_description')) {
        <div class="principal-investigator">
          <span class="project-title">Principal investigator</span>
          <i class="pi pi-arrow-right !text-[12px] px-2 !text-[#8D9299]"></i>
          <label class="project-data" for="username">{{ project.project_lead_description }}</label>
        </div>
      }
      @if (hasField('lever')) {
        <div class="principal-investigator">
          <span class="project-title">Lever</span>
          <i class="pi pi-arrow-right !text-[12px] px-2 !text-[#8D9299]"></i>
          <label class="project-data" for="username">{{ getLeverName() }}</label>
        </div>
      }
      @if (hasField('start_date')) {
        <div class="start-date">
          <span class="project-title">Start date</span>
          <i class="pi pi-arrow-right !text-[12px] px-2 !text-[#8D9299]"></i>
          <label class="project-data" for="username">{{ project.start_date | date: 'dd/MM/yyyy' }}</label>
        </div>
      }
      @if (hasField('end_date')) {
        <div class="end-date">
          <span class="project-title">End date</span>
          <i class="pi pi-arrow-right !text-[12px] px-2 !text-[#8D9299]"></i>
          <label class="project-data" for="username">{{ project.end_date | date: 'dd/MM/yyyy' }}</label>
        </div>
      }
    </div>
    <div class="project-indicators w-full flex flex-wrap gap-16 gap-y-6">
      @for (indicator of processedIndicators; track indicator.indicator?.indicator_id) {
        <div 
          class="indicator {{ indicator.indicator.name === 'Capacity Sharing for Development' ? 'max-w-[126px]' : 'max-w-[178px]' }} {{ enableIndicatorFilter ? 'cursor-pointer hover:opacity-80 transition-opacity' : '' }} {{ isIndicatorFiltered(indicator) ? 'indicator-filtered' : '' }}"
          (click)="onIndicatorClick(indicator, $event)"
          (keydown.enter)="onIndicatorClick(indicator, $event)"
          [attr.tabindex]="enableIndicatorFilter ? 0 : -1"
          [attr.role]="enableIndicatorFilter ? 'button' : null"
          [attr.aria-label]="enableIndicatorFilter ? 'Filter by ' + indicator.indicator.name : null">
          <div class="indicator-number-container">
            <i
              class="pi {{ indicator.indicator.icon_src }} !text-[18px] {{
                (indicator.indicator.indicator_type_id === 1 ? 'output' : 'outcome') + '-icon'
              }}">
            </i>
            <label class="indicator-number" for="username">{{ indicator.count_results }}</label>
          </div>
          <label class="indicator-type" for="username">{{ indicator.indicator.name }}</label>
          @if (isIndicatorFiltered(indicator)) {
            <div class="indicator-filter-line"></div>
          }
        </div>
      }
    </div>
  </div>
</a>
