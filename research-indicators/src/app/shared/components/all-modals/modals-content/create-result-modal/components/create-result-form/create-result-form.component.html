<div class="grid pb-4.5 pr-4.5 pl-1 pt-2 grid-cols-[1fr_30%] h-[calc(100%-60px)]">
  <div class="container-left">
    <h1 class="title-text">WANT ASSISTANCE WITH AI FOR YOUR RESULT CREATION?</h1>

    <div class="cards-container">
      <div class="card under-construction-card" style="position: relative" (click)="this.createResultManagementService.resultPageStep.set(1)">
        <div class="under-construction-image">
          <img src="/construction.png" alt="construction" class="construction-icon" />
        </div>

        <div class="card-content">
          <div style="width: 90px">
            <img src="/images/upload-ai.svg" alt="upload-ai" style="width: 100%" />
          </div>

          <div class="card-title">
            <p class="title">File Upload AI</p>
            <p class="description">Upload a file and our AI system will extract the basic information.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="columns">
      <div class="section">
        <h2 class="title" style="margin-top: 0">Primary Project</h2>
        <p-select
          [options]="getContractsService.list()"
          [(ngModel)]="body().contract_id"
          optionLabel="select_label"
          optionValue="agreement_id"
          placeholder="Search by project code, project name or principal investigator"
          [virtualScroll]="true"
          [lazy]="true"
          [virtualScrollItemSize]="10"
          [filter]="true"
          class="!text-base">
          <ng-template let-item pTemplate="item">
            <div class="primary-item">
              <p>
                <b>{{ item?.agreement_id }} -</b> {{ item?.description }}
              </p>
              <p class="primary-item-investigator space-x-3">
                Principal investigator &rarr;
                <span class="primary-item-investigator-name">{{ item?.project_lead_description }}</span>
                <span class="text-[#B9C0C5]">|</span>
                Start date &rarr;
                <span class="primary-item-investigator-name">{{ item?.start_date | date: 'dd MMMM yyyy' }}</span>
                <span class="text-[#B9C0C5]">|</span>
                End date &rarr;
                <span class="primary-item-investigator-name">{{ item?.end_date | date: 'dd MMMM yyyy' }}</span>
              </p>
            </div>
            <div class="px-5 w-full flex items-end primary-item">
              <button
                class="uppercase max-w-22 text-xs font-semibold px-2 py-1 rounded-lg border"
                [class.border-[#7CB580]]="item?.contract_status?.toUpperCase() !== 'ONGOING'"
                [class.text-[#235B2D]]="item?.contract_status?.toUpperCase() !== 'ONGOING'"
                [class.border-[#7C9CB9]]="item?.contract_status?.toUpperCase() === 'ONGOING'"
                [class.text-[#153C71]]="item?.contract_status?.toUpperCase() === 'ONGOING'">
                {{ item?.contract_status }}
              </button>
            </div>
          </ng-template>

          <ng-template let-selected pTemplate="selectedItem">
            @if (selected?.select_label?.includes(' - ')) {
              <span>
                <b>{{ selected.select_label.split(' - ')[0] }}</b> - {{ selected.select_label.split(' - ')[1] }}
              </span>
            } @else {
              <span>{{ selected.select_label }}</span>
            }
          </ng-template>
        </p-select>
      </div>

      <div class="section">
        <h2 class="title">Indicator<span class="text-red-500">*</span></h2>
        <h4 class="description">
          If you're unsure which indicator to select, visit
          <span class="about-indicators" (click)="this.router.navigate(['/about-indicators']); this.allModalsService.closeModal('createResult')">
            About Indicators
          </span>
          for more details.
        </h4>
        <p-select
          [style]="{ width: '100%' }"
          [options]="indicatorsService.indicatorsGrouped()"
          [(ngModel)]="body().indicator_id"
          placeholder="Select Indicator"
          [group]="true">
          <ng-template let-group pTemplate="group">
            <div class="flex align-items-center">
              <span>{{ group.label }}</span>
            </div>
          </ng-template>
        </p-select>
      </div>

      <div class="section">
        <h2 class="title">Title<span class="text-red-500">*</span></h2>
        <h4 class="description">Provide a clear and descriptive name for the result, avoiding acronyms or technical jargon.</h4>
        <input pInputText id="username" aria-describedby="username-help" [(ngModel)]="body().title" />
      </div>

      <div class="button-group">
        <p-button
          [disabled]="!body().title?.length || !body().indicator_id || !body().contract_id"
          label="Create and Continue"
          icon="pi pi-arrow-right"
          iconPos="right"
          (click)="this.createResult(true)"></p-button>
      </div>
    </div>
  </div>

  <div class="flex flex-col justify-start gap-6 bg-grey-100 px-5 py-5 rounded-b-lg overflow-auto h-full bg-[#f4f7f9] no-scrollbar other-tools">
    <h1 class="text-xl font-bold atc-primary-blue-500">OTHER TOOLS</h1>

    <div class="bg-white rounded-lg px-5 py-4 border border-zinc-200 flex flex-col items-start justify-center gap-2 other-tool-item">
      <div style="max-width: 190px">
        <img src="/images/tracking.png" alt="TIP" style="width: 100%" />
      </div>

      <p class="text-lg font-semibold atc-primary-blue-600 other-tool-item-title">Submit Knowledge Products</p>

      <p class="text-base font-normal atc-grey-600 other-tool-item-description">
        For Knowledge Products use TIP to ensure proper alignment with guidelines.
      </p>

      <div class="cursor-pointer">
        <a class="sidebar-button-text" href="https://tip.alliance.cgiar.org/" target="_blank" rel="noopener noreferrer">
          Report in TIP <span class="material-symbols-rounded"> arrow_forward </span>
        </a>
      </div>
    </div>

    <div class="bg-white rounded-lg px-5 py-4 border border-zinc-200 flex flex-col items-start justify-center gap-2 other-tool-item">
      <div style="max-width: 250px">
        <img src="/images/prms-reporting-tool.svg" alt="PRMS Reporting Tool" style="width: 100%; height: 92px" />
      </div>

      <p class="text-lg font-semibold atc-primary-blue-600 other-tool-item-title">Submit Pooled Projects Results</p>

      <p class="text-base font-normal atc-grey-600 other-tool-item-description">
        For Pooled Project Results report directly in PRMS for accurate management.
      </p>

      <div class="cursor-pointer">
        <a class="sidebar-button-text" href="https://reporting.cgiar.org/" target="_blank" rel="noopener noreferrer">
          Report in PRMS <span class="material-symbols-rounded"> arrow_forward </span>
        </a>
      </div>
    </div>
  </div>
</div>
