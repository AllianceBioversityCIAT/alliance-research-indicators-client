<div class="input-container">
  @if (label) {
    <div class="flex items-center justify-between w-full">
      <label class="label inline-block flex items-center" for="username">
        {{ label }}
        @if (isRequired) {
          <span class="text-red-500">*</span>
        }
      </label>
      @if (maxLength) {
        <app-word-counter [value]="'' + (value || '')" [maxWords]="maxLength"></app-word-counter>
      }
    </div>
  }
  @if (description) {
    <small class="description" for="username">{{ description }}</small>
  }

  @if (currentResultIsLoading()) {
    <p-skeleton width="100%" height="7rem" styleClass="mb-2" />
  } @else {
    <div>
      <textarea
        appSaveOnWriting
        [rows]="rows"
        pTextarea
        [class]="styleClass"
        [autoResize]="false"
        [disabled]="disabled"
        [(ngModel)]="value"
        (ngModelChange)="setValue($event)"
        (keydown)="
          shouldPreventInput($event, body().value || null) ? $event.preventDefault() : shouldPreventTextInput($event) ? $event.preventDefault() : null
        "
        [style]="isInvalid() || showMaxReachedMessage() ? { border: '2px solid #E69F00', resize: 'none' } : { resize: 'none' }"
        [placeholder]="placeholder">
      </textarea>
      @if (helperText) {
        <div class="flex items-center gap-1 text-[#8D9299] text-[14px]">
          <span class="leading-4" [innerHTML]="helperText"></span>
        </div>
      }
      @if (isInvalid()) {
        <div class="flex items-center gap-1 text-[#E69F00]  {{ size || 'text-sm  mt-1' }}">
          <i class="material-symbols-rounded !text-base">warning</i>
          <span>This field is required</span>
        </div>
      }
      @if (showMaxReachedMessage()) {
        <div class="flex items-center gap-1 mt-1 text-[#E69F00] text-sm">
          <i class="material-symbols-rounded !text-base">warning</i>
          <span>Maximum reached</span>
        </div>
      }
    </div>
  }
</div>
