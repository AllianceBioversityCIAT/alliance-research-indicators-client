<div class="input-container">
  @if (label) {
    <div class="flex items-center justify-between w-full">
      <label class="label inline-block flex items-center" for="username">
        {{ label }}
        @if (isRequired) {
          <span class="text-red-500">*</span>
        }
      </label>
      @if (maxLength) {
        <app-word-counter [value]="'' + (body().value || '')" [maxWords]="maxLength"></app-word-counter>
      }
    </div>
  }
  @if (description) {
    <small class="description" for="username">{{ description }}</small>
  }
  @if (currentResultIsLoading()) {
    <p-skeleton width="100%" height="2.8rem" styleClass="mb-2" />
  } @else {
    <div>
      @if (type === 'text') {
        <input
          appSaveOnWriting
          pInputText
          id="username"
          class="text-[14px]"
          [placeholder]="placeholder"
          [class]="this.inputValid().class"
          [style]="isInvalid() || showMaxReachedMessage() ? { border: '2px solid #E69F00' } : {}"
          aria-describedby="username-help"
          [disabled]="disabled"
          [(ngModel)]="this.body().value"
          (keydown)="
            shouldPreventInput($event, body().value || null)
              ? $event.preventDefault()
              : shouldPreventTextInput($event)
                ? $event.preventDefault()
                : null
          "
          [autocomplete]="autoComplete"
          (ngModelChange)="setValue($event)" />
      } @else if (type === 'number') {
        <input
          #numberInput
          type="text"
          [placeholder]="placeholder"
          [class]="'w-full p-3 border rounded-lg ' + (isInvalid() || showMaxReachedMessage() ? 'border-2 border-[#E69F00]' : 'border-gray-300')"
          [style]="isInvalid() || showMaxReachedMessage() ? { border: '2px solid #E69F00' } : {}"
          [(ngModel)]="this.body().value"
          (ngModelChange)="setValue($event)"
          (input)="onNumberInput($event)"
          (keydown)="shouldPreventNumberInput($event) ? $event.preventDefault() : null"
          (paste)="handlePasteNumber($event)"
          [disabled]="disabled"
          inputmode="numeric"
          pattern="[0-9,]*" />
      }
      @if (helperText) {
        <div class="pt-1">
          <small class="text-[#8D9299] text-[14px]" for="username">{{ helperText }}</small>
        </div>
      }

      @if (!this.inputValid().valid) {
        @if (isInvalid()) {
          <div class="flex items-center gap-1 mt-1 text-[#E69F00] text-sm">
            <i class="material-symbols-rounded !text-base">warning</i>
            <span>{{ this.inputValid().message }}</span>
          </div>
        }
      }
      @if (showMaxReachedMessage()) {
        <div class="flex items-center gap-1 mt-1 text-[#E69F00] text-sm">
          <i class="material-symbols-rounded !text-base">warning</i>
          <span>Maximum reached</span>
        </div>
      }
    </div>
  }
</div>
