<div class="container">
  <h3 class="title-text">{{ this.cache.currentMetadata().result_title }}</h3>
  <br />

  <div class="card-container">
    <div class="content-section">
      <div class="card-content first-column">
        <div class="card-title">ALLIANCE ALIGNMENT</div>
        <div class="form-container">
          <div>
            <app-multiselect
              label="Projects*"
              [signal]="body"
              optionLabel="select_label"
              optionValue="contract_id"
              signalOptionValue="contracts"
              serviceName="contracts">
              <ng-template #rows let-institution>
                <div class="item-content">
                  <div class="information">
                    <div class="row">
                      <div>
                        <strong>{{ institution.acronym }}</strong> - {{ institution.name }}
                      </div>
                      <div class="metadata-container">
                        <div class="metadata-text">
                          <div class="metadata-title">Institution Type</div>
                          &nbsp; <i class="material-symbols-rounded"> arrow_forward </i>&nbsp;
                          <i class="institution-type-description">{{ institution?.institution_type?.name }}</i>
                        </div>

                        <div class="divider"></div>

                        <div class="metadata-text">
                          <div class="metadata-title">Headquarter</div>
                          &nbsp; <i class="material-symbols-rounded"> arrow_forward </i>&nbsp;
                          <img
                            width="20"
                            height="20"
                            [src]="environment.flagsUrl + institution?.isoAlpha2 + '.svg'"
                            [alt]="institution?.institution_type?.name"
                            [srcset]="environment.flagsUrl + institution?.isoAlpha2 + '.svg'" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </app-multiselect>
          </div>

          <div>
            <app-multiselect
              label="Levers*"
              [signal]="body"
              optionLabel="full_name"
              optionValue="lever_id"
              signalOptionValue="levers"
              [serviceName]="'levers'">
              <ng-template #rows let-lever>
                <div class="item-content">
                  <div class="information">
                    <strong>{{ lever.short_name }}&nbsp;</strong> - {{ lever.other_names }}
                  </div>
                  <button class="primary-button" [class]="{ active: lever.is_primary }" (click)="markAsPrimary(lever, 'lever')">
                    {{ lever.is_primary ? 'Primary' : 'Select as Primary' }} <i class="material-symbols-rounded">star</i>
                  </button>
                </div>
              </ng-template>
            </app-multiselect>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="button-container">
    <p-button label="Back" icon="pi pi-arrow-left" iconPos="left" (click)="saveData('back')"></p-button>
    <p-button label="Next" icon="pi pi-arrow-right" iconPos="left" (click)="saveData('next')"></p-button>
    <p-button label="Save" severity="success" icon="pi pi-save" iconPos="left" (click)="saveData()" />
  </div>
</div>
