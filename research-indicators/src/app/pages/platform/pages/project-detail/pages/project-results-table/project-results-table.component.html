<p-table
  class="w-full"
  #dt1
  [value]="resultList() | filterByTextWithAttr: 'full_name' : searchValue"
  dataKey="id"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  [scrollHeight]="getScrollHeight()"
  [loading]="this.loading()"
  [paginator]="true"
  [globalFilterFields]="['name', 'country.name', 'representative.name', 'status']"
  styleClass="custom-table">
  <ng-template pTemplate="caption">
    <div class="header">
      <div class="search-box">
        <i class="material-symbols-rounded">search</i>
        <input [(ngModel)]="searchValue" type="text" placeholder="Search by code, title or creator" />
      </div>
      <div class="options">
        <p-button
          label="New Project Result"
          icon="pi pi-plus"
          severity="info"
          size="small"
          styleClass="!rounded-[9px] !h-7.5 !text-[13px]"
          [style]="{ 'min-width': '95px' }"
          (onClick)="openCreateResultForProject()" />
        <p-button label="Clear" [text]="true" icon="pi pi-filter-slash" (onClick)="clear(dt1)" size="small" />
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="header" let-customer>
    <tr>
      @for (col of this.columns; track $index) {
        <th [pSortableColumn]="col.attr" scope="col">
          <div class="flex items-start gap-2">
            {{ col.header }}
            <p-sortIcon field="{{ col.attr }}"></p-sortIcon>
          </div>
        </th>
      }
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-customer>
    <tr>
      @for (col of this.columns; track $index) {
        <td
          [routerLink]="customer.indicator.indicator_id === 5 ? null : ['/result', customer.result_official_code]"
          (click)="customer.indicator.indicator_id === 5 ? openEditRequestdOicrsModal(customer.result_official_code) : null">
          @if (col.attr === 'statusName') {
            <app-custom-tag [statusId]="customer.result_status?.result_status_id" [statusName]="customer.result_status?.name"></app-custom-tag>
          } @else {
            {{ col.pipe ? (customer[col.attr] | date: 'dd/MM/yyyy') : customer[col.attr] }}
          }
        </td>
      }
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <td colspan="7" class="text-center p-2 bg-white">
      <div class="flex flex-col items-center gap-4 bg-surface-ground p-6 rounded-xl">
        <div class="flex flex-col items-center gap-1">
          <img src="/images/landing/projects.png" alt="Empty Projects" class="w-[180px] h-[180px] mb-3" />
          <h2 class="text-[#173F6F] text-[16px] font-bold">
            PROJECT RESULTS LIST IS EMPTY
          </h2>
          <p class="text-[#4C5158] leading-4 text-center text-[14px] max-w-[600px] pt-1">
            No results found for this project at the moment.
          </p>
        </div>
      </div>
    </td>
  </ng-template>
</p-table>
